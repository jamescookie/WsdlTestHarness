<project>
    <property name="username" value="admin"/>
    <property name="password" value="w0mble"/>

    <taskdef name="deploy" classname="org.apache.catalina.ant.DeployTask"/>
    <taskdef name="list" classname="org.apache.catalina.ant.ListTask"/>
    <taskdef name="reload" classname="org.apache.catalina.ant.ReloadTask"/>
    <taskdef name="resources" classname="org.apache.catalina.ant.ResourcesTask"/>
    <taskdef name="roles" classname="org.apache.catalina.ant.RolesTask"/>
    <taskdef name="start" classname="org.apache.catalina.ant.StartTask"/>
    <taskdef name="stop" classname="org.apache.catalina.ant.StopTask"/>
    <taskdef name="undeploy" classname="org.apache.catalina.ant.UndeployTask"/>

    <macrodef name="tomcat.deploy">
        <attribute name="path"/>
        <attribute name="war"/>
        <attribute name="host"/>
        <sequential>
            <undeploy url="http://@{host}/manager" username="${username}" password="${password}"
                    path="@{path}"/>
            <deploy url="http://@{host}/manager" username="${username}" password="${password}"
                    path="@{path}" war="@{war}"/>
        </sequential>
    </macrodef>

</project>

